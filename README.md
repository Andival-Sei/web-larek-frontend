# Проектная работа «Веб-ларёк»

## Описание проекта

Web-ларёк — это интернет-магазин товаров для веб-разработчиков, реализованный с использованием архитектурного паттерна MVP (Model-View-Presenter). Приложение позволяет просматривать каталог товаров, добавлять их в корзину и оформлять заказы.

## Используемый стек
- TypeScript
- SCSS
- Webpack
- HTML5
- ES6+

## Инструкция по запуску

1. Установите зависимости:
   ```bash
   npm install
   ```
2. Запустите проект в режиме разработки:
   ```bash
   npm run start
   ```
3. Для сборки проекта используйте:
   ```bash
   npm run build
   ```
4. В корне проекта создайте файл `.env` со строкой:
   ```
   API_ORIGIN=https://larek-api.nomoreparties.co
   ```

## Структура проекта

```
src/
├── components/          # Компоненты приложения (View, Presenter)
│   └── base/           # Базовые классы (EventEmitter, Api)
├── models/             # Модели данных (Model)
├── types/              # TypeScript типы и интерфейсы
├── utils/              # Утилиты и константы
├── scss/               # Стили
└── pages/              # HTML страницы
```

## Архитектура и описание классов

### MVP-архитектура
- **Model** — управляет данными и бизнес-логикой (например, товары, корзина, заказ).
- **View** — отвечает за отображение интерфейса (каталог, карточки товаров, корзина, формы).
- **Presenter** — связывает Model и View, обрабатывает пользовательские действия, обновляет View.

### Базовые классы
- **EventEmitter** — брокер событий для слабого связывания компонентов. Позволяет подписываться на события, снимать обработчики, инициировать события.
- **Api** — интерфейс для работы с серверным API (GET, POST, PUT, DELETE), обработка ответов и ошибок.

### Основные компоненты
- **ProductCard** — карточка товара в каталоге.
- **ProductModal** — модальное окно с подробной информацией о товаре.
- **Basket** — корзина покупок.
- **OrderForm** — форма оформления заказа (2 шага: доставка и контакты).
- **Modal** — базовый компонент модальных окон.

### Модели данных
- **ProductModel** — загрузка и хранение каталога товаров.
- **BasketModel** — управление состоянием корзины.
- **OrderModel** — оформление и валидация заказа.

### Взаимодействие компонентов
- Все взаимодействия реализованы через события с помощью EventEmitter.
- Примеры событий: `catalog:changed`, `product:selected`, `basket:changed`, `order:submit`, `modal:open` и др.

### Типы данных
- Типы и интерфейсы вынесены в отдельные файлы в папке `src/types/`.
- Описаны типы для товаров, корзины, заказа, событий, API и базовых классов.

### Принципы разработки
- Каждый класс выполняет одну задачу (Single Responsibility Principle).
- Слабое связывание между слоями через события.
- Повторяющиеся части вынесены в утилиты.
- Все данные строго типизированы.

## Пример описания класса

**EventEmitter** — класс для работы с событиями. Позволяет подписываться на события, снимать обработчики, инициировать события, слушать все события или сбрасывать все обработчики.

**Api** — класс для работы с серверным API. Позволяет выполнять HTTP-запросы, автоматически обрабатывает ответы и ошибки.

