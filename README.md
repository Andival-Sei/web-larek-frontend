# Web-ларёк

Интернет-магазин для веб-разработчиков, реализованный на TypeScript по архитектурному паттерну MVP (Model-View-Presenter). Приложение позволяет:

1. Просматривать каталог товаров;
2. Добавлять товары в корзину;
3. Оформлять заказ в два шага (доставка — контакты);
4. Получать подтверждение успешной оплаты.

---

## Стек технологий

| Задача                | Инструмент |
|-----------------------|------------|
| Язык / типизация      | **TypeScript** 5.x |
| Сборка                | **Webpack** 5.x |
| Стили                 | **SCSS** + PostCSS |
| Линтинг / форматирование | **ESLint**, **Prettier** |

Дополнительные зависимости перечислены в `package.json`.

---

## Запуск проекта

1. Установите зависимости

```bash
npm i
```

2. Создайте файл окружения `.env` в корне проекта и пропишите адрес API:

```dotenv
API_ORIGIN=https://larek-api.nomoreparties.co
```

3. Старт режима разработки с hot-reload:

```bash
npm run start
```

4. Сборка production-версии:

```bash
npm run build
```

5. Дополнительные скрипты

* `npm run lint` – проверка ESLint;
* `npm run lint:fix` – авто-исправление;
* `npm run format` – форматирование Prettier.

---

## Архитектура

Проект построен по упрощённой MVP-схеме с событийным обменом данных.

```
[View] ⇄ (EventEmitter) ⇄ [Presenter / index.ts] ⇄ (EventEmitter) ⇄ [Model] ⇄ [API]
```

* **Model** – бизнес-логика и хранение данных (`src/models`).
* **View** – «тупые» компоненты DOM-дерева (`src/views`).
* **EventEmitter** – брокер событий для слабого связывания (`src/components/base/events.ts`).
* **Presenter** – файл `src/index.ts`, в котором регистрируются все подписки/обработчики.

Диаграмма классов UML находится в папке `docs` (опционально).

### Основные сущности

| Слой | Класс | Ответственность |
|------|-------|-----------------|
| Model | `CatalogModel` | Список товаров (получение из API, выбор preview) |
| Model | `BasketModel`  | Содержимое корзины, подсчёт стоимости |
| Model | `OrderModel`   | Данные заказа, валидация форм |
| API   | `WebLarekAPI`  | GET/POST запросы к серверу |
| View  | `Card`, `Basket`, `Modal`, `OrderForm`, `ContactsForm`, `Success`, `Page` | Отображение данных |

Полные интерфейсы всех сущностей находятся в `src/types`.

---

## Данные и типизация

| Тип | Описание |
|-----|----------|
| `IProduct` | Товар из API |
| `IBasketItem` | Товар в корзине |
| `IOrder` | Полный заказ, отправляемый на сервер |
| `IOrderForm` / `IContactsForm` | Данные шагов заказа |
| `IAppEvents` | Список всех внутренних событий приложения |

Файл `tsconfig.json` собирается с флагом `noImplicitAny`, что исключает появление неявных `any`.

---

## Сценарий работы пользователя

1. Пользователь видит каталог (`GET /product`).
2. Клик по карточке открывает модальное окно (`card:select`).
3. Кнопка «Купить» кладёт товар в корзину (`card:add`).
4. Корзина доступна из хедера; в ней можно удалить товары.
5. Кнопка «Оформить» запускает форму доставки (шаг-1), затем форму контактов (шаг-2).
6. После успешного `POST /order` отображается окно «Заказ оформлен», корзина очищается.

---

## Принципы кодирования

* Single Responsibility – один класс / модуль / файл = одна обязанность.
* DRY – код переиспользуется через базовые классы и утилиты.
* Typings First – любое новое API сначала описывается интерфейсом.
* Event Driven – никаких прямых ссылок Model ↔ View, только события.

---

## Лицензия

Проект создан в рамках обучения на курсе «TypeScript и ООП» Яндекс.Практикум. Файлы контента (иконки, шрифты) принадлежат их авторам.